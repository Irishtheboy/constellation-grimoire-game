{"version":3,"file":"static/js/266.c40af14e.chunk.js","mappings":"sOACO,MAAMA,EAAsBA,CAACC,EAAYC,EAAcC,KAC5D,MAAM,cAAEC,EAAa,MAAEC,EAAK,YAAEC,EAAW,SAAEC,GAAaN,GAClD,OAAEO,EAAM,WAAEC,EAAa,GAAE,UAAEC,EAAY,IAAOR,EAG9CS,EAAeC,EAAqBX,EAAYK,GAChDO,EAAkBC,EAAyBH,EAAcT,EAAcC,GAE7E,MAAO,CACLY,MAAOC,EAAcR,EAAQF,EAAYW,aAAcN,GACvDO,MAAOL,EACPM,SAAUR,EAAaQ,SACvBC,WAAW,IAAIC,MAAOC,cACtBC,aAAcjB,EAAYW,aAC1BZ,MAAOA,EACPG,OAAQA,EACRgB,KAAMb,EAAaa,KACnBC,aAAa,IAKXb,EAAuBA,CAACX,EAAYK,KACxC,MAAM,cAAEF,EAAa,MAAEC,EAAK,SAAEE,GAAaN,EACrCyB,EAAUpB,EAAYW,aAAe,EAAIX,EAAYqB,KAAOrB,EAAYW,aAAe,EAgB7F,IAAIW,EAAO,WACPvB,GAAS,GAAIuB,EAAO,SACfvB,GAAS,GAAIuB,EAAO,WACpBvB,GAAS,IAAGuB,EAAO,gBAE5B,IAAIJ,EAAO,aAKX,OAJIE,EAAU,GAAKF,EAAO,aACjBE,EAAU,GAAKF,EAAO,YACtBnB,GAAS,KAAImB,EAAO,gBAEtB,CACLI,OACAJ,OACAL,SAAUU,EA3BM,CAChBC,SAAU,CAAC,2BAA4B,sBAAuB,0BAC9DC,aAAc,CAAC,oBAAqB,mBAAoB,qBACxDC,SAAU,CAAC,oBAAqB,YAAa,oBAC7CC,OAAQ,CAAC,iBAAkB,kBAAmB,wBAuBTL,IACrCF,UACAtB,gBACAG,SAAUA,GAAYH,EACtBC,UAKES,EAA2BA,CAACoB,EAAShC,EAAcC,KACvD,MAAM,OAAEK,EAAM,WAAEC,EAAa,GAAE,UAAEC,EAAY,IAAOR,EAE9CiC,EAAoB,CACxBC,SAAU,CACRC,WAAY,CAAC,oBAADC,OACUJ,EAAQf,SAAQ,8CAAAmB,OAA6CJ,EAAQ3B,SAAQ,sFAAA+B,OAC1FJ,EAAQV,KAAI,aAAAc,OAAYJ,EAAQ3B,SAAQ,oBAAA+B,OAAmBJ,EAAQf,SAAQ,YAAAmB,OAAWJ,EAAQ9B,cAAa,iDAEpHmC,WAAY,CAAC,oCAADD,OAC0BJ,EAAQf,SAAQ,MAAAmB,OAAKJ,EAAQ3B,SAAQ,wGAAA+B,OACvDJ,EAAQf,SAAQ,mCAAAmB,OAAkCJ,EAAQ3B,SAAQ,sDAEtFiC,UAAW,CAAC,0BAADF,OACiBJ,EAAQ3B,SAAQ,yCAAA+B,OAAwCJ,EAAQf,SAAQ,6DAAAmB,OAC5EJ,EAAQf,SAAQ,sCAAAmB,OAAqCJ,EAAQ3B,SAAQ,kCAE7FkC,aAAc,CAAC,kCAADH,OACsBJ,EAAQ3B,SAAQ,mBAAA+B,OAAkBJ,EAAQf,SAAQ,0EAAAmB,OAC7DJ,EAAQf,SAAQ,wCAAAmB,OAAuCJ,EAAQ3B,SAAQ,uDAIlGmC,UAAW,CACTC,IAAK,CAAC,OAADL,QACgB,OAAZnC,QAAY,IAAZA,OAAY,EAAZA,EAAcC,gBAAiB,aAAY,oCAAAkC,OAAmCJ,EAAQ3B,SAAQ,qBAAA+B,OAAoBM,EAAoBnC,EAAW,IAAG,0DAAA6B,QACrI,OAAZnC,QAAY,IAAZA,OAAY,EAAZA,EAAcC,gBAAiB,mBAAkB,yBAAAkC,OAAwBJ,EAAQ3B,SAAQ,qDAAA+B,OAAoDM,EAAoBnC,EAAW,IAAG,+CAE3LoC,KAAM,CAAC,OAADP,QACe,OAAZnC,QAAY,IAAZA,OAAY,EAAZA,EAAcC,gBAAiB,mBAAkB,kDAAAkC,OAAiDJ,EAAQ3B,SAAQ,yBAAA+B,OAAwBM,EAAoBnC,EAAW,IAAG,6FAAA6B,OAClIJ,EAAQf,SAAQ,UAAAmB,QAAqB,OAAZnC,QAAY,IAAZA,OAAY,EAAZA,EAAcC,gBAAiB,cAAa,iBAAAkC,OAAgBJ,EAAQ3B,SAAQ,qDAI1JuC,YAAa,CACXH,IAAK,CACHN,WAAW,qFAADC,OAAuFJ,EAAQ3B,SAAQ,sBACjHgC,WAAW,mGACXC,UAAU,gGACVC,aAAa,sEAADH,OAAwEJ,EAAQ3B,SAAQ,kBAEtGsC,KAAM,CACJR,WAAW,mGACXE,WAAW,6GACXC,UAAU,sDAADF,OAAwDJ,EAAQ3B,SAAQ,sDACjFkC,aAAa,6EAADH,OAA+EJ,EAAQ3B,SAAQ,iCAK3GwC,EAAUlB,EAAiBM,EAAkBC,SAASF,EAAQV,OAC9DwB,EAAWnB,EAAiBM,EAAkBO,UAAUlC,IACxDyC,EAAad,EAAkBW,YAAYtC,GAAQ0B,EAAQV,MAEjE,MAAM,GAANc,OAAUS,EAAO,KAAAT,OAAIU,EAAQ,KAAAV,OAAIW,IAI7BjC,EAAgBA,CAACR,EAAQe,EAAcW,KAC3C,MAYMgB,EAASrB,EAZO,CACpBc,IAAK,CAAC,UAAW,UAAW,WAAY,aACxCE,KAAM,CAAC,QAAS,SAAU,SAAU,cAUQrC,IACxC2C,EARiB,CACrB,2BAA4B,oBAC5B,oBAAqB,yBACrB,YAAa,cACb,mBAAoB,qBAIgBjB,EAAQf,WAAS,MAAAmB,OAAUJ,EAAQf,UAEzE,MAAM,GAANmB,OAAUY,EAAM,KAAAZ,OAAIa,IAGhBtB,EAAoBuB,GACjBA,EAAMC,KAAKC,MAAMD,KAAKE,SAAWH,EAAMI,SAG1CZ,EAAuBa,IACD,CACxB,cAAiB,sDACjB,cAAiB,yDACjB,cAAiB,8DACjB,iBAAoB,2CACpB,aAAgB,sCAChB,mBAAsB,0CACtB,eAAkB,uDAGKA,IAAY,0DAI1BC,EAA6BC,IACxC,MAAM,OAAEC,EAAM,MAAEC,EAAK,QAAEC,EAAO,WAAEC,GAAeJ,EAGzCK,EAAcC,EAAmBH,GAEjCI,EAAoB,CACxB,2CACA,uCACA,0CACA,uCAGIC,EAAiB,CACrBC,WAAY,CAAC,MAAD9B,OACJT,EAAiBqC,GAAkB,MAAA5B,OAAKsB,EAAOrD,SAAQ,SAAA+B,OAAQuB,EAAMtD,SAAQ,uDAAA+B,OAAsD0B,EAAYK,KAAI,8CAAA/B,OAA6CsB,EAAOrD,SAAQ,6FAAA+B,OAC5KsB,EAAOrD,SAAQ,SAAA+B,OAAQuB,EAAMtD,SAAQ,wCAAA+B,OAAuCT,EAAiBqC,GAAkB,MAAA5B,OAAK0B,EAAYK,KAAI,2CAAA/B,OAA0CsB,EAAOrD,SAAQ,gCAExO+D,YAAa,CAAC,kCAADhC,OACuBsB,EAAOrD,SAAQ,SAAA+B,OAAQuB,EAAMtD,SAAQ,yBAAA+B,OAAwBT,EAAiBqC,GAAkB,MAAA5B,OAAK0B,EAAYK,KAAI,sDAAA/B,OAAqDsB,EAAOrD,SAAQ,wDAAA+B,OACrNT,EAAiBqC,GAAkB,MAAA5B,OAAKsB,EAAOrD,SAAQ,SAAA+B,OAAQuB,EAAMtD,SAAQ,4DAAA+B,OAA2D0B,EAAYK,KAAI,0CAAA/B,OAAyCsB,EAAOrD,SAAQ,gBAExNgE,QAAS,CAAC,2BAADjC,OACoBT,EAAiBqC,GAAkB,QAAA5B,OAAOsB,EAAOrD,SAAQ,SAAA+B,OAAQuB,EAAMtD,SAAQ,qCAAA+B,OAAoC0B,EAAYK,KAAI,sBAAA/B,OAAqBuB,EAAMtD,SAAQ,wDAAA+B,OAAuDsB,EAAOrD,SAAQ,4EAAA+B,OAChMT,EAAiBqC,GAAkB,MAAA5B,OAAK0B,EAAYK,KAAI,MAAA/B,OAAKsB,EAAOrD,SAAQ,+EAIjJiE,EAAY3C,EAAiBsC,EAAeH,EAAYxC,OAE9D,MAAO,CACLT,MAAM,kBAADuB,OAAoBsB,EAAOrD,SAAQ,QAAA+B,OAAOuB,EAAMtD,UACrDW,MAAOsD,EACPrD,SAAUU,EAAiBqC,GAC3B9C,WAAW,IAAIC,MAAOC,cACtBmD,KAAM,eACNC,aAAc,CAACd,EAAOrD,SAAUsD,EAAMtD,UACtCkB,aAAa,IAKXwC,EAAsBH,IAC1B,IAAKA,GAA8B,IAAnBA,EAAQN,OACtB,MAAO,CACLhC,KAAM,aACN6C,KAAM,iEAIV,MACMM,EADWb,EAAQc,IAAIC,GAAOA,EAAIC,QAAQC,eACvBC,KAAK,KAO9B,IAAIxD,EAAO,aACPyD,EAAmB,EACnBC,EAAe,EACfC,EAAkB,EAPG,CAAC,YAAa,OAAQ,MAAO,SAAU,WAAY,UAS3DC,QAAQC,IACnBV,EAAQW,SAASD,IAAOJ,MATT,CAAC,OAAQ,MAAO,MAAO,OAAQ,QAAS,eAAM,gBAYtDG,QAAQC,IACfV,EAAQW,SAASD,IAAOH,MAZN,CAAC,QAAS,UAAW,QAAS,QAAS,QAAS,UAexDE,QAAQC,IAClBV,EAAQW,SAASD,IAAOF,MAG1BF,EAAmBC,GAAgBD,EAAmBE,EACxD3D,EAAO,cACE0D,EAAeC,IACxB3D,EAAO,WAST,MAAO,CACLA,OACA6C,KARY,CACZC,YAAa,sFACbC,QAAS,iEACTH,WAAY,sFAKA5C,KAIH+D,EAAuBA,CAACtF,EAAYuF,KAC/C,MAAM,cAAEpF,EAAa,SAAEG,GAAaN,EAE9BwF,EAAsBC,EAA2BnF,GAAYH,EAAeA,EAAeoF,GAEjG,MAAO,CACLzE,MAAO4E,EAAuBH,GAC9BtE,MAAOuE,EACPrE,WAAW,IAAIC,MAAOC,cACtBjB,MAAOmF,EACPf,KAAM,UACNhD,aAAa,IAKXiE,EAA6BA,CAACnF,EAAUH,EAAeC,KAC3D,MAAMuF,EAAa,CACjB,EAAG,aACH,GAAI,QACJ,GAAI,SACJ,GAAI,cACJ,GAAI,UAGAC,EAAYC,OAAOC,KAAKH,GAC3BI,UACAC,KAAKC,GAAK7F,GAAS8F,SAASD,IAEzBE,EAAOP,EAAYD,EAAWC,GAAa,WAE3CQ,EAAa,CACjBC,SAAU,CAAC,yCAADhE,OACiC/B,EAAQ,qCAAA+B,OAAoClC,EAAa,2IAAAkC,OAClD/B,EAAQ,sGAE1DgG,WAAY,CAAC,sDAADjE,OAC4C/B,EAAQ,kEAAA+B,OAAiElC,EAAa,uFAAAkC,OACzG/B,EAAQ,uHAE7CiG,MAAO,CAAC,0BAADlE,OACqB/B,EAAQ,kDAAA+B,OAAiDlC,EAAa,2IAAAkC,OACxD/B,EAAQ,kFAElD0B,OAAQ,CAAC,4CAADK,OACsC/B,EAAQ,qKAAA+B,OACZ/B,EAAQ,sCAAA+B,OAAqClC,EAAa,uDAEpGqG,YAAa,CAAC,yDAADnE,OAC8C/B,EAAQ,oGAAA+B,OACzC/B,EAAQ,gHAElCmG,OAAQ,CAAC,sBAADpE,OACgBjC,EAAK,MAAAiC,OAAK/B,EAAQ,4KAAA+B,OACgB/B,EAAQ,+EAIpE,OAAOsB,EAAiBwE,EAAWD,KAI/BT,EAA0BtF,IAC9B,MAAMsG,EAAS,CACb,EAAG,CAAC,kBAAmB,eAAgB,yBACvC,GAAI,CAAC,gBAAiB,eAAiB,kBACvC,GAAI,CAAC,qBAAuB,sBAAuB,oBACnD,GAAI,CAAC,0BAA4B,mBAAoB,oBACrD,GAAI,CAAC,wBAAyB,mBAAoB,mBAG9Cd,EAAYC,OAAOC,KAAKY,GAC3BX,UACAC,KAAKC,GAAK7F,GAAS8F,SAASD,IAE/B,OAAIL,EACKhE,EAAiB8E,EAAOd,IAG3B,sBAANvD,OAA6BjC,G","sources":["utils/storyGenerator.js"],"sourcesContent":["// AI-Powered Story Generation for Hollow Knight-inspired Dark Realm\nexport const generateBattleStory = (playerData, battleResult, opponentData) => {\n  const { constellation, level, battleStats, username } = playerData;\n  const { result, spellsUsed = [], itemsUsed = [] } = battleResult;\n  \n  // Generate contextual story based on player progression and battle context\n  const storyContext = analyzePlayerContext(playerData, battleStats);\n  const battleNarrative = generateDynamicNarrative(storyContext, battleResult, opponentData);\n  \n  return {\n    title: generateTitle(result, battleStats.totalBattles, storyContext),\n    story: battleNarrative,\n    location: storyContext.location,\n    timestamp: new Date().toISOString(),\n    battleNumber: battleStats.totalBattles,\n    level: level,\n    result: result,\n    mood: storyContext.mood,\n    aiGenerated: true\n  };\n};\n\n// Analyze player context for personalized storytelling\nconst analyzePlayerContext = (playerData, battleStats) => {\n  const { constellation, level, username } = playerData;\n  const winRate = battleStats.totalBattles > 0 ? battleStats.wins / battleStats.totalBattles : 0;\n  \n  const locations = {\n    beginner: ['the Forgotten Crossroads', 'the Ancestral Mound', 'the Whispering Caverns'],\n    intermediate: ['the City of Tears', 'the Crystal Peak', 'the Fungal Wastes'],\n    advanced: ['the Ancient Basin', 'the Abyss', 'the White Palace'],\n    master: ['the Void Realm', 'the Dream Realm', 'the Eternal Sanctum']\n  };\n  \n  const moods = {\n    triumphant: ['confident', 'determined', 'ascending'],\n    struggling: ['cautious', 'learning', 'adapting'],\n    desperate: ['fighting', 'surviving', 'enduring'],\n    transcendent: ['enlightened', 'powerful', 'legendary']\n  };\n  \n  let tier = 'beginner';\n  if (level >= 20) tier = 'master';\n  else if (level >= 10) tier = 'advanced';\n  else if (level >= 5) tier = 'intermediate';\n  \n  let mood = 'struggling';\n  if (winRate > 0.8) mood = 'triumphant';\n  else if (winRate < 0.3) mood = 'desperate';\n  else if (level >= 15) mood = 'transcendent';\n  \n  return {\n    tier,\n    mood,\n    location: getRandomElement(locations[tier]),\n    winRate,\n    constellation,\n    username: username || constellation,\n    level\n  };\n};\n\n// Generate dynamic narrative based on context\nconst generateDynamicNarrative = (context, battleResult, opponentData) => {\n  const { result, spellsUsed = [], itemsUsed = [] } = battleResult;\n  \n  const narrativeElements = {\n    openings: {\n      triumphant: [\n        `In the depths of ${context.location}, where shadows dance with ancient power, ${context.username} moved with the confidence of one who has tasted victory many times before.`,\n        `The ${context.mood} warrior ${context.username} descended into ${context.location}, their ${context.constellation} essence radiating with hard-earned mastery.`\n      ],\n      struggling: [\n        `Through the treacherous paths of ${context.location}, ${context.username} ventured forth, each step a lesson in the harsh realities of this forsaken realm.`,\n        `The shadows of ${context.location} seemed to whisper doubts, but ${context.username} pressed on, driven by the need to grow stronger.`\n      ],\n      desperate: [\n        `Battered but unbroken, ${context.username} found themselves in the unforgiving ${context.location}, where only the strongest survive.`,\n        `The cruel winds of ${context.location} carried the scent of defeat, yet ${context.username} refused to yield to despair.`\n      ],\n      transcendent: [\n        `Like a force of nature itself, ${context.username} manifested in ${context.location}, their presence bending reality to their will.`,\n        `The very essence of ${context.location} seemed to acknowledge the power of ${context.username}, a being who had transcended mortal limitations.`\n      ]\n    },\n    \n    conflicts: {\n      win: [\n        `The ${opponentData?.constellation || 'Void Spawn'} emerged from the darkness, but ${context.username} was ready. With ${getSpellDescription(spellsUsed[0])}, they carved through shadow and bone alike.`,\n        `As the ${opponentData?.constellation || 'Ancient Guardian'} unleashed its fury, ${context.username} responded with the precision of a master, their ${getSpellDescription(spellsUsed[0])} finding its mark with devastating effect.`\n      ],\n      loss: [\n        `The ${opponentData?.constellation || 'Nightmare Entity'} proved to be a formidable adversary. Despite ${context.username}'s best efforts with ${getSpellDescription(spellsUsed[0])}, the darkness claimed victory this day.`,\n        `In a clash that shook the very foundations of ${context.location}, the ${opponentData?.constellation || 'Shadow Lord'} overwhelmed ${context.username}, teaching them that power alone is not enough.`\n      ]\n    },\n    \n    conclusions: {\n      win: {\n        triumphant: `Victory came as naturally as breathing. The essence of the fallen foe merged with ${context.username}'s growing legend.`,\n        struggling: `Hard-fought victory brought not just triumph, but wisdom. Each battle shapes the warrior within.`,\n        desperate: `Against all odds, victory was seized from the jaws of defeat. Hope rekindled in the darkness.`,\n        transcendent: `The outcome was never in doubt. Reality itself bent to acknowledge ${context.username}'s supremacy.`\n      },\n      loss: {\n        triumphant: `Even legends must sometimes fall to rise again stronger. This defeat will fuel future victories.`,\n        struggling: `Defeat stings, but it teaches lessons that victory cannot. The path to mastery is paved with such moments.`,\n        desperate: `Another setback in a journey filled with them. Yet ${context.username} endures, for that is what defines a true warrior.`,\n        transcendent: `Even transcendent beings must face humility. This defeat will only deepen ${context.username}'s understanding of power.`\n      }\n    }\n  };\n  \n  const opening = getRandomElement(narrativeElements.openings[context.mood]);\n  const conflict = getRandomElement(narrativeElements.conflicts[result]);\n  const conclusion = narrativeElements.conclusions[result][context.mood];\n  \n  return `${opening} ${conflict} ${conclusion}`;\n};\n\n// Generate contextual titles\nconst generateTitle = (result, battleNumber, context) => {\n  const titlePrefixes = {\n    win: ['Triumph', 'Victory', 'Conquest', 'Ascension'],\n    loss: ['Trial', 'Ordeal', 'Lesson', 'Reckoning']\n  };\n  \n  const locationTitles = {\n    'the Forgotten Crossroads': 'in the Crossroads',\n    'the City of Tears': 'beneath Weeping Stones',\n    'the Abyss': 'in the Void',\n    'the White Palace': 'in the Pale Court'\n  };\n  \n  const prefix = getRandomElement(titlePrefixes[result]);\n  const locationSuffix = locationTitles[context.location] || `in ${context.location}`;\n  \n  return `${prefix} ${locationSuffix}`;\n};\n\nconst getRandomElement = (array) => {\n  return array[Math.floor(Math.random() * array.length)];\n};\n\nconst getSpellDescription = (spellId) => {\n  const spellDescriptions = {\n    'ASTRAL_STRIKE': 'void-touched steel that cuts through reality itself',\n    'PHOENIX_FLAME': 'soul fire that burns with the intensity of dying stars',\n    'GLACIAL_SHARD': 'crystallized despair that freezes the very essence of being',\n    'THUNDEROUS_WRATH': 'the rage of forgotten gods made manifest',\n    'VOID_TEMPEST': 'winds from the space between worlds',\n    'DIVINE_RESTORATION': 'light borrowed from realms beyond death',\n    'CELESTIAL_WARD': 'barriers woven from the dreams of ancient guardians'\n  };\n  \n  return spellDescriptions[spellId] || 'forbidden arts drawn from the deep places of the world';\n};\n\n// Generate story for friendly duels between friends\nexport const generateFriendlyDuelStory = (duelData) => {\n  const { winner, loser, chatLog, duelEvents } = duelData;\n  \n  // Analyze chat for context\n  const chatContext = analyzeChatContext(chatLog);\n  \n  const friendlyLocations = [\n    'the Training Grounds of Echoing Whispers',\n    'the Sparring Circle of Ancient Bonds',\n    'the Dueling Sanctum of Friendly Rivalry',\n    'the Practice Arena of Shared Wisdom'\n  ];\n  \n  const duelNarratives = {\n    respectful: [\n      `In ${getRandomElement(friendlyLocations)}, ${winner.username} and ${loser.username} met for a test of skill born from mutual respect. ${chatContext.tone}. The duel was fierce yet honorable, with ${winner.username} emerging victorious through superior technique.`,\n      `What began as friendly banter between ${winner.username} and ${loser.username} evolved into a formal challenge in ${getRandomElement(friendlyLocations)}. ${chatContext.tone}. Both warriors fought with honor, but ${winner.username}'s mastery proved decisive.`\n    ],\n    competitive: [\n      `The competitive spirit between ${winner.username} and ${loser.username} reached its peak in ${getRandomElement(friendlyLocations)}. ${chatContext.tone}. Their rivalry pushed both to their limits, with ${winner.username} claiming victory through sheer determination.`,\n      `In ${getRandomElement(friendlyLocations)}, ${winner.username} and ${loser.username} settled their friendly rivalry with steel and sorcery. ${chatContext.tone}. The battle was intense, ending with ${winner.username}'s triumph.`\n    ],\n    playful: [\n      `Laughter echoed through ${getRandomElement(friendlyLocations)} as ${winner.username} and ${loser.username} engaged in their spirited duel. ${chatContext.tone}. Even in defeat, ${loser.username} smiled, knowing they had learned from their friend ${winner.username}.`,\n      `What started as jest between friends became a delightful contest in ${getRandomElement(friendlyLocations)}. ${chatContext.tone}. ${winner.username} proved victorious, but both gained something valuable from the exchange.`\n    ]\n  };\n  \n  const narrative = getRandomElement(duelNarratives[chatContext.mood]);\n  \n  return {\n    title: `Friendly Duel: ${winner.username} vs ${loser.username}`,\n    story: narrative,\n    location: getRandomElement(friendlyLocations),\n    timestamp: new Date().toISOString(),\n    type: 'friendlyDuel',\n    participants: [winner.username, loser.username],\n    aiGenerated: true\n  };\n};\n\n// Analyze chat context for story generation\nconst analyzeChatContext = (chatLog) => {\n  if (!chatLog || chatLog.length === 0) {\n    return {\n      mood: 'respectful',\n      tone: 'Their words were few but carried the weight of mutual respect'\n    };\n  }\n  \n  const messages = chatLog.map(msg => msg.message.toLowerCase());\n  const allText = messages.join(' ');\n  \n  // Detect mood from chat content\n  const competitiveWords = ['challenge', 'beat', 'win', 'defeat', 'stronger', 'better'];\n  const playfulWords = ['haha', 'lol', 'fun', 'joke', 'laugh', 'ðŸ˜„', 'ðŸ˜‚'];\n  const respectfulWords = ['honor', 'respect', 'skill', 'learn', 'teach', 'wisdom'];\n  \n  let mood = 'respectful';\n  let competitiveScore = 0;\n  let playfulScore = 0;\n  let respectfulScore = 0;\n  \n  competitiveWords.forEach(word => {\n    if (allText.includes(word)) competitiveScore++;\n  });\n  \n  playfulWords.forEach(word => {\n    if (allText.includes(word)) playfulScore++;\n  });\n  \n  respectfulWords.forEach(word => {\n    if (allText.includes(word)) respectfulScore++;\n  });\n  \n  if (competitiveScore > playfulScore && competitiveScore > respectfulScore) {\n    mood = 'competitive';\n  } else if (playfulScore > respectfulScore) {\n    mood = 'playful';\n  }\n  \n  const tones = {\n    competitive: 'Their words crackled with competitive fire, each seeking to prove their superiority',\n    playful: 'Their banter was filled with laughter and good-natured teasing',\n    respectful: 'They spoke with the reverence of true warriors acknowledging each other\\'s strength'\n  };\n  \n  return {\n    mood,\n    tone: tones[mood]\n  };\n};\n\nexport const generateLevelUpStory = (playerData, newLevel) => {\n  const { constellation, username } = playerData;\n  \n  const ascensionNarratives = generateAscensionNarrative(username || constellation, constellation, newLevel);\n  \n  return {\n    title: generateAscensionTitle(newLevel),\n    story: ascensionNarratives,\n    timestamp: new Date().toISOString(),\n    level: newLevel,\n    type: 'levelup',\n    aiGenerated: true\n  };\n};\n\n// Generate personalized ascension narratives\nconst generateAscensionNarrative = (username, constellation, level) => {\n  const milestones = {\n    5: 'apprentice',\n    10: 'adept', \n    15: 'master',\n    20: 'grandmaster',\n    25: 'legend'\n  };\n  \n  const milestone = Object.keys(milestones)\n    .reverse()\n    .find(m => level >= parseInt(m));\n  \n  const rank = milestone ? milestones[milestone] : 'initiate';\n  \n  const narratives = {\n    initiate: [\n      `In the quiet moments between battles, ${username} felt something stir within. The ${constellation} constellation pulsed with newfound energy, marking the beginning of a greater journey.`,\n      `The shadows themselves seemed to acknowledge ${username}'s growth. Power flowed through their being like liquid starlight, transforming them from within.`\n    ],\n    apprentice: [\n      `The ancient halls of learning whispered secrets to ${username} as they crossed the threshold into deeper understanding. The ${constellation} bloodline awakened, revealing hidden potential.`,\n      `In a moment of perfect clarity, ${username} felt the weight of their destiny. The realm itself seemed to bend slightly, recognizing a new force in its midst.`\n    ],\n    adept: [\n      `Reality rippled around ${username} as they achieved a new level of mastery. The ${constellation} constellation blazed brighter in the cosmic tapestry, its chosen vessel growing ever stronger.`,\n      `The void between worlds acknowledged ${username}'s ascension. Where once there was potential, now there was undeniable power.`\n    ],\n    master: [\n      `The very fabric of existence trembled as ${username} transcended mortal limitations. Ancient entities paused in their eternal dance to witness this moment of transformation.`,\n      `In the deepest chambers of the soul, ${username} found the key to true power. The ${constellation} legacy burned within them like a star being born.`\n    ],\n    grandmaster: [\n      `Legends speak of moments when mortals touch divinity. ${username} had become such a legend, their name destined to echo through eternity.`,\n      `The boundary between ${username} and the cosmic forces they wielded began to blur. They were becoming something beyond what they once were.`\n    ],\n    legend: [\n      `In achieving level ${level}, ${username} had transcended the very concept of mortality. They were no longer bound by the laws that govern lesser beings.`,\n      `The universe itself rewrote its rules to accommodate ${username}'s ascension. They had become a force of nature, eternal and unstoppable.`\n    ]\n  };\n  \n  return getRandomElement(narratives[rank]);\n};\n\n// Generate contextual ascension titles\nconst generateAscensionTitle = (level) => {\n  const titles = {\n    5: ['First Awakening', 'The Stirring', 'Initial Transcendence'],\n    10: ['The Deepening', 'Adept\\'s Rise', 'Power Manifest'],\n    15: ['Master\\'s Threshold', 'The Great Awakening', 'Cosmic Alignment'],\n    20: ['Grandmaster\\'s Ascension', 'Beyond Mortality', 'Legendary Status'],\n    25: ['Mythic Transformation', 'Divine Ascension', 'Eternal Legend']\n  };\n  \n  const milestone = Object.keys(titles)\n    .reverse()\n    .find(m => level >= parseInt(m));\n  \n  if (milestone) {\n    return getRandomElement(titles[milestone]);\n  }\n  \n  return `Ascension to Level ${level}`;\n};"],"names":["generateBattleStory","playerData","battleResult","opponentData","constellation","level","battleStats","username","result","spellsUsed","itemsUsed","storyContext","analyzePlayerContext","battleNarrative","generateDynamicNarrative","title","generateTitle","totalBattles","story","location","timestamp","Date","toISOString","battleNumber","mood","aiGenerated","winRate","wins","tier","getRandomElement","beginner","intermediate","advanced","master","context","narrativeElements","openings","triumphant","concat","struggling","desperate","transcendent","conflicts","win","getSpellDescription","loss","conclusions","opening","conflict","conclusion","prefix","locationSuffix","array","Math","floor","random","length","spellId","generateFriendlyDuelStory","duelData","winner","loser","chatLog","duelEvents","chatContext","analyzeChatContext","friendlyLocations","duelNarratives","respectful","tone","competitive","playful","narrative","type","participants","allText","map","msg","message","toLowerCase","join","competitiveScore","playfulScore","respectfulScore","forEach","word","includes","generateLevelUpStory","newLevel","ascensionNarratives","generateAscensionNarrative","generateAscensionTitle","milestones","milestone","Object","keys","reverse","find","m","parseInt","rank","narratives","initiate","apprentice","adept","grandmaster","legend","titles"],"ignoreList":[],"sourceRoot":""}